
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
       "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <meta http-equiv="content-type" content="text/html;charset=UTF-8" />
  <title>
    <% if @content_for_title %>
    <%= @content_for_title %>
    <% else %>
    <%= controller.action_name %>
    <% end %>
  </title>
  <%= javascript_include_tag :defaults %>
  <%= javascript_include_tag 'scriptaculos' %>
  <%= javascript_include_tag 'slider' %>
  <%= javascript_include_tag 'resizable' %>
  <%= javascript_include_tag 'lightwindow' %>
  <%= javascript_include_tag 'livepipe/livepipe' %>
  <%= javascript_include_tag 'livepipe/window' %>
  <%= javascript_include_tag 'livepipe/progressbar' %>
  <%= javascript_include_tag 'jsProgressBarHandler.js' %>
  <%= stylesheet_link_tag 'scaffold' %>
  <%= stylesheet_link_tag 'holy-grail-no-quirks-mode' %>
  <%= stylesheet_link_tag 'global_navi' %>
  <%= stylesheet_link_tag 'livepipe/window' %>
  <%= stylesheet_link_tag 'livepipe/progressbar' %>
  <%= stylesheet_link_tag 'lightwindow' %>
  <%= @content_for_header %>
  <script>
document.observe('dom:loaded',function(){
//styled examples use the window factory for a shared set of behavior
var window_factory = function(container,options){
var window_header = new Element('div',{
className: 'window_header'
});
var window_title = new Element('div',{
className: 'window_title'
});
var window_close = new Element('div',{
className: 'window_close'
});
var window_contents = new Element('div',{
className: 'window_contents'
});
var w = new Control.Window(container,Object.extend({
className: 'window',
closeOnClick: window_close,
draggable: window_header,
insertContentAt: window_contents,
afterOpen: function(){
window_title.update(container.readAttribute('title'))
}
},options || {}));
w.container.insert(window_header);
window_header.insert(window_title);
window_header.insert(window_close);
w.container.insert(window_contents);
return w;
};
var styled_window_one = window_factory($('styled_window_one'));

});
  </script>
</head>

<% if @content_for_body %>
<%= @content_for_body %>
<% else %>
<body>

<a href="#login_form" id="styled_window_one" title="OpenIDでログイン">
OpenIdでログイン(Livepipe ver.)</a>

<div id="login_form" style="display: none">
<div id="window_content" style="margin-top: 20px">
<p>
<% form_tag :controller => "login", :action => "login" do |f| %>
<p>
<label for="open_url" >
OpenID URL
</label>
<%= text_field_tag :openid_url, nil, {:size => "50"} %>
</p>
<p align="right" style="border-top: 1px dotted rgb(204, 204, 204); padding: 15px 30px 0px 0px;">
<%= submit_tag "ログイン" %>
</p>
<% end -%>
</p>
</div>
</div>

<div id="header">
<span style="font-size: 400%;font-weight: bold">ここどこ</span><span style="font-size: 300%;font-weight: normal"><%= "::#{@content_for_title}" if @content_for_title %></span>
<table height="34" cellpadding="4" style="color:#666">
<tr>
<% if session[:user] %>
<td>ようこそ <strong><%= link_to session[:user].nickname, session[:user] %></strong> さん</td>
<% else %>
<td><a href="#login_form" class="lightwindow">OpenIDでログイン</a>すると、クイズを投稿したり、得点ランキングに参加することができます。</td>
<% end %>
</tr>
</table>
<div id="navigation">
<ul id="globalNavi">
<li><%= link_to image_tag("fam/icons/find.png", {:style => "border: none; vertical-align: middle"}) + "クイズを探す", :controller => "quizzes", :action => "index" %></li>
<li><%= link_to image_tag("fam/icons/map_edit.png", {:style => "border: none; vertical-align: middle"}) + "クイズを投稿する", :controller => "quizzes", :action => "new" %></li>
<% if session[:user] %>
<li><%= link_to image_tag("fam/icons/user.png", {:style => "border: none; vertical-align: middle"}) + "マイページ", session[:user] %></li>
<li><%= link_to image_tag("fam/icons/cancel.png", {:style => "border: none; vertical-align: middle"}) + "ログアウト", :controller => "login", :action => "logout" %></li>
<% else %>
<li><%= link_to image_tag("openid.gif", {:style => "border: none; vertical-align: middle"}) + "ログイン", "#login_form", {:class => "lightwindow"} %></li>
<% end %>
</ul>
</div>
</div>

<p style="color: green"><%= flash[:notice] %></p>
<div id="colmask">
<div>
<%= yield %>
<div><%= @content_for_left %></div>

<div><%= @content_for_right %></div>

</div>
</div>

<div id="footer">
<p>ここどこ © 2008 Kuoka, Yusuke All Right Reserved.</p>
</div>

</body>
<% end %>

</html>

